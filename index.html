<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J277 Revision Tutor — OCR GCSE Computer Science</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">

        <!-- ==================== LANDING VIEW ==================== -->
        <div id="view-landing" class="view active">
            <header>
                <h1>J277 Revision Tutor</h1>
                <h2>OCR GCSE Computer Science — Paper 1: Computer Systems</h2>
                <p class="brand">Designed by the KCS CompSci Dept</p>
            </header>

            <main id="main-content">
                <!-- Description -->
                <section class="landing-description">
                    <p>An AI-powered revision tutor for OCR J277/01 Computer Science, designed and built by DJH to help you prepare for your June 2026 exams. Every question, prompt, and piece of feedback has been carefully developed against the OCR specification, mark schemes, and examiner reports — this isn't a generic chatbot.</p>
                    <p>Choose a topic below, and the tutor will test your understanding through targeted questioning. It adapts to your responses, catches misconceptions, and won't just hand you the answers.</p>
                    <p class="landing-meta">Currently covering Paper 1 (Computer Systems). No accounts. No data stored. Nothing leaves this session.</p>
                </section>

                <!-- Topic Selection -->
                <section class="topic-selection">
                    <h3>Choose a topic</h3>
                    <div class="unit-selector" id="unit-selector">
                        <button class="unit-btn" data-unit="1.1" onclick="selectUnit('1.1')">
                            <span class="unit-number">1.1</span>
                            <span class="unit-name">Systems Architecture</span>
                        </button>
                        <button class="unit-btn" data-unit="1.2" onclick="selectUnit('1.2')">
                            <span class="unit-number">1.2</span>
                            <span class="unit-name">Memory &amp; Storage</span>
                        </button>
                        <button class="unit-btn" data-unit="1.3" onclick="selectUnit('1.3')">
                            <span class="unit-number">1.3</span>
                            <span class="unit-name">Networks, Connections &amp; Protocols</span>
                        </button>
                        <button class="unit-btn" data-unit="1.4" onclick="selectUnit('1.4')">
                            <span class="unit-number">1.4</span>
                            <span class="unit-name">System Security</span>
                        </button>
                        <button class="unit-btn" data-unit="1.5" onclick="selectUnit('1.5')">
                            <span class="unit-number">1.5</span>
                            <span class="unit-name">Systems Software</span>
                        </button>
                        <button class="unit-btn" data-unit="1.6" onclick="selectUnit('1.6')">
                            <span class="unit-number">1.6</span>
                            <span class="unit-name">Ethical, Legal, Cultural &amp; Environmental Impacts</span>
                        </button>
                    </div>
                </section>
            </main>

            <footer>
                <p>Developed by the KCS CompSci Dept, 2026</p>
            </footer>
        </div>

        <!-- ==================== QUIZ MODE VIEW ==================== -->
        <div id="view-quiz" class="view">
            <header class="compact-header">
                <div class="header-row">
                    <button class="btn-back" onclick="endQuiz()" aria-label="Back to home">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
                            <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Home
                    </button>
                    <h1>Revision Tutor</h1>
                    <div class="header-spacer"></div>
                </div>
            </header>

            <main id="quiz-content">
                <!-- Chat Interface -->
                <div id="quiz-chat" class="chat-container">
                    <div class="chat-header">
                        <span id="quiz-unit-label" class="tag"></span>
                        <button class="btn-secondary btn-small" onclick="endQuiz()">End Session</button>
                    </div>
                    <div id="quiz-messages" class="chat-messages" role="log" aria-live="polite">
                        <!-- Messages populated by JS -->
                    </div>
                    <div class="chat-input-area">
                        <textarea 
                            id="quiz-input" 
                            placeholder="Type your answer…" 
                            rows="2"
                            aria-label="Your answer"
                            onkeydown="handleQuizKeydown(event)"
                        ></textarea>
                        <button id="quiz-send-btn" class="btn-send" onclick="sendQuizMessage()" aria-label="Send answer">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
                                <path d="M3 10L17 3L10 17L9 11L3 10Z" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </main>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>